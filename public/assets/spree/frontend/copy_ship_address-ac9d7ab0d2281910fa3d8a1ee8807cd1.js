(function(){Spree.ready(function(e){return Spree.onAddress=function(){var t,r,n,i;return e("#checkout_form_address").is("*")?(r=function(t){return e("#"+t+"country select").val()},Spree.updateState=function(t){var n;return n=r(t),null!=n?null==Spree.Checkout[n]?e.get(Spree.routes.states_search,{country_id:n},function(e){return Spree.Checkout[n]={states:e.states,states_required:e.states_required},Spree.fillStates(Spree.Checkout[n],t)}):Spree.fillStates(Spree.Checkout[n],t):void 0},Spree.fillStates=function(t,r){var n,i,s,a,d,u,l,o;return l=t.states_required,u=t.states,s=e("#"+r+"state"),a=s.find("select"),i=s.find("input"),d=s.find("state-required"),u.length>0?(n=parseInt(a.val()),a.html(""),o=[{name:"",id:""}].concat(u),e.each(o,function(t,r){var i;return i=e(document.createElement("option")).attr("value",r.id).html(r.name),n===r.id&&i.prop("selected",!0),a.append(i)}),a.prop("disabled",!1).show(),i.hide().prop("disabled",!0),s.show(),d.show(),l&&a.addClass("required"),a.removeClass("hidden"),i.removeClass("required")):(a.hide().prop("disabled",!0),i.show(),l?(d.show(),i.addClass("required")):(i.val(""),d.hide(),i.removeClass("required")),s.toggle(!!l),i.prop("disabled",!l),i.removeClass("hidden"),a.removeClass("required"))},e("#bcountry select").change(function(){return Spree.updateState("b")}),e("#scountry select").change(function(){return Spree.updateState("s")}),Spree.updateState("s"),t="brandon_hay",n=e("input#order_use_shipping"),n.change(function(){return i(n)}),(i=function(t){return t.is(":checked")?(e("#billing .inner").hide(),e("#billing .inner input, #billing .inner select").prop("disabled",!0)):(e("#billing .inner").show(),e("#billing .inner input, #billing .inner select").prop("disabled",!1),Spree.updateState("b"))})(n)):void 0},Spree.onAddress()})}).call(this);